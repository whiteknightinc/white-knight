<!DOCTYPE html>
{% extends "base.jinja2" %}
{% block body %}
  <h2 class="home-header">Feed of Shame</h2>
  <div class="reddit_scrape">
    <form action="{{ request.route_url('scrape') }}" method="POST">
      <div class="field">
        <label for="subreddit">Subreddit: </label>
        <input type="text" name="subreddit" id="subreddit"/>
      </div>
      <div class="field">
        <label for="sub_number">Number of Threads: </label>
          <select name="sub_number" id="sub_number">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
          </select>
      </div>
      <div class="control_row">
        <input type="submit" name="Submit" value="Scrape!" id="scrape_button"/>
      </div>
    </form>
  </div>
  <div class="tweet_scrape">
    <form action="{{ request.route_url('scrape_twitter') }}" method="POST">
      <div class="field">
        <label for="twitter_handle">Twitter Handle: </label>
        <input type="text" name="handle" id="handle"/>
      </div>
      <div class="field">
        <label for="tweet_number">Number of Tweets: </label>
          <select name="tweet_number" id="tweet_number">
            <option>5</option>
            <option>50</option>
            <option>75</option>
            <option>100</option>
          </select>
      </div>
      <div class="control_row">
        <input type="submit" name="Submit" value="Scrape!"/>
      </div>
    </form>
  </div>
  <div class="shame-feed">
    {% for comment in comments %}
    {% if comment.approved %}<div class="approved">{% endif %}
    <article class="shame-post">
            <h3 class="comment_title">{{ comment.username }}</h3>
            <div class="post">
              <div class="comment_body" id ="detail_post">
                {{ comment.text }}
              </div>
            </div>
          </a>
    </article>
    <br>
    <a href="{{ request.route_url('edit_comment', id = comment.id)}}"><button class="edit_button">edit comment</button></a>
    <div style="text-align:center" class="twitter">
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="Here's a terrible {% if not comment.reddit %}Tweet{% else %}post{% endif %} by {{ comment.username }}:
{{comment.permalink }}" data-via="KnightShame" data-size="large" data-dnt="true" data-url="{{ comment.permalink }}" data-hashtags="shittyposts">Tweet</a>
    <script>!function(d,s,id){
      var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';
      if(!d.getElementById(id)){
        js=d.createElement(s);
        js.id=id;
        js.src=p+'://platform.twitter.com/widgets.js';
        fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    </div>
    {% if comment.approved %}</div>{% endif %}
    {% endfor %}
  </div>
{% endblock %}
